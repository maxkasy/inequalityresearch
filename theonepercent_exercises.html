<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Empirical Research on Economic Inequality</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/offcanvas.css" rel="stylesheet">
    <!-- <link href="css/pushy.css" rel="stylesheet" > -->
    <link rel="stylesheet" href="css/demo.css">
    <link href="css/simple-sidebar.css" rel="stylesheet">

	<link href='https://fonts.googleapis.com/css?family=Martel|Martel+Sans' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>	
	
    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <script src="../../assets/js/ie8-responsive-file-warning.js"></script>
    <script src="js/ie-emulation-modes-warning.js"></script>
    <script src="js/pushy.min.js"></script>
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      
    <!-- Google Analytics -->
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-76905463-1', 'auto');
	ga('send', 'pageview');
	</script>
	
  </head>

  <body>
	<div id="wrapper">  
	
    <header class="site-header push">	     
	<div class="menu-btn"><div class="container" onclick="myFunction(this)">
		<div class="bar1"></div>
		<div class="bar3"></div>
		<div class="site-header-title">EMPIRICAL RESEARCH ON ECONOMIC INEQUALITY</div>
    </div>
    </header>

    <div class="container">
      <div class="row row-offcanvas row-offcanvas-left">
        <div class="col-xs-12 col-sm-9">
                   <nav class="pushy pushy-left" id="sidebar-wrapper">
            <ul class="sidebar-nav">
                        <li class="pushy-link"><a href="introduction.html">Introduction</a>
                </li>
                <li class="pushy-submenu">
                    <a href="#">Justice & Research</a>
                    <ul>
                        <li class="pushy-link"><a href="justiceresearch.html">CHAPTER</a></li>
                        <li class="pushy-link"><a href="justiceresearch_slides.html">SLIDES</a></li>
                    </ul>
                </li>
                <li class="pushy-submenu-open">
                    <a href="#">The 1%</a>
                    <ul>
                        <li class="pushy-link"><a href="theonepercent.html">CHAPTER</a></li>
                        <li class="pushy-link"><a href="theonepercent_slides.html">SLIDES</a></li>
                        <li class="pushy-link"><span class="link-active"><a href="theonepercent_exercises.html">EXERCISES</span></a></li>
                    </ul>
                </li>
                <li class="pushy-submenu">
                    <a href="#">Gender Inequality</a>
                    <ul>
                        <li class="pushy-link"><a href="genderinequality.html">CHAPTER</a></li>
                        <li class="pushy-link"><a href="genderinequality_slides.html">SLIDES</a></li>
                    </ul>
                </li>
                <li class="pushy-submenu">
                	<a href="#">Discrimination</a>
                    <ul>
                        <li class="pushy-link"><a href="discrimination.html">CHAPTER</a></li>
                        <li class="pushy-link"><a href="discrimination_slides.html">SLIDES</a></li>
                        <li class="pushy-link"><a href="discrimination_exercises.html">EXERCISES</a></li>
                    </ul>
                <li class="pushy-submenu">
                	<a href="#">Unions</a>
                     <ul>
                        <li class="pushy-link"><a href="unions.html">CHAPTER</a></li>
                        <li class="pushy-link"><a href="unions_slides.html">SLIDES</a></li>
                        <li class="pushy-link"><a href="unions_exercises.html">EXERCISES</a></li>
                    </ul>
                <li class="pushy-submenu">
                <a href="#">Migration, Technology, Education</a>
                    <ul>
                        <li class="pushy-link"><a href="migration.html">CHAPTER</a></li>
                        <li class="pushy-link"><a href="migration_slides.html">SLIDES</a></li>
                    </ul>                
                 <li class="pushy-submenu">
                 <a href="#">Intergenerational Mobility</a>
                    <ul>
                        <li class="pushy-link"><a href="intergenerationalmobility.html">CHAPTER</a></li>
                        <li class="pushy-link"><a href="intergenerationalmobility_slides.html">SLIDES</a></li>
                    </ul>                
                 <li class="pushy-submenu">
                 <a href="#">Changing Prices</a>
                    <ul>
                        <li class="pushy-link"><a href="changingprices.html">CHAPTER</a></li>
                        <li class="pushy-link"><a href="changingprices_slides.html">SLIDES</a></li>
                        <li class="pushy-link"><a href="changingprices_exercises.html">EXERCISES</a></li>  
                    </ul>               
                 <li class="pushy-submenu">
                 <a href="#"> Redistributive Taxation</a>
                 	<ul>
                        <li class="pushy-link"><a href="redistributivetaxation.html">CHAPTER</a></li>
                        <li class="pushy-link"><a href="redistributivetaxation_slides.html">SLIDES</a></li>
                 	</ul>
                 	<li class="pushy-link"><a href="guestlectures.html">Guest Lectures</a></li>
                 	<br>
                 <li class="pushy-link"><a href="about.html">About</a></li>
                 <li class="pushy-link"><a href="furtherreadings.html">Further Readings</a></li>
                 <li class="pushy-link"><a href="http://wealthometer.org">Wealthometer.org</a></li>

				 </ul>
        </nav> 
        <div id="page-container-wrapper">
          <div class="jumbotron">
	          <h5> EXERCISES </h5>
            <h1>The 1%&mdash; <br>Estimating the Pareto parameter</h1><br>
           <p><h2>1. By hand exercises</h2></p>
		   <p>1. Suppose a data-set contains the following observations on the wealth of 10 random rich individuals (in thousands):\(100, 105, 112, 120, 129, 141, 158, 183, 224, 316.\)</p>
<p>Calculate an estimate of the Pareto parameter \(\alpha\), and of \(E[Y|Y>100]\).
</p>
<br>
           <p>2. Now suppose that you just observe that the number of people in the  tax bracket \([100, 200]\) equals \(800\), and the number of people with wealth above \(200\) equals \(200\).</p><p>
Calculate an estimate of the Pareto parameter \(\alpha\), and of \(E[Y|Y>100]\).
</p>
           <p><h2>2. Matlab exercises</h2></p>
		   <p>	Write code that performs the following:</p>
		   <p> 1. Generate \(n\) independent draws from the Pareto distribution with parameters \(\underline{y}\) and \(\alpha\)</p>
		   <p> <i>Hint:</i> You can take \(Y_i = \underline{y} \cdot U_i^{-1/\alpha}\) for \(U\)uniformly \([0,1]\) distributed. Why?</p>
		   <p> 2. Save these data to a .csv file, and exchange your file with a classmate.</p>
		   <p> 3. Use your classmate's data to estimate \(\alpha\), using the formula in equation: 
			   $$\widehat{\alpha}^{MLE} = \frac{n}{\sum_i \log \left (y_i/ \underline{y} \right )}.$$
		   </p>
		   <p>4. Now generate new data using the same procedure as before, and just tell your classmate the value \(\underline{y}\), as well as the number of observation below / above the cutoff  \(2\cdot \underline{y}\). Ask her/him to provide an estimate of \(\alpha\) based on these numbers, using equation: 
			   $$\widehat{\alpha}^{MLE}  = \frac{\log (N_2 /n)}{\log \left ( \underline{y} /y_l\right )}.$$
			   </p>
		   <p>5. Now we are going to verify the argument of section "\(r-g\)" by simulations. Generate data following the process in equation \(Y_{t+1} =  w_t + R_t\cdot Y_{t},\) that is: 
$$Y_{t+1} =  w_t + R_t\cdot Y_{t},$$
where \(w_t\) and \(R_t\) are independent draws from uniform distributions with boundary values that you pick. Generate 10.000 observations, and only keep the last 2.000. Save them, and give them to a classmate.</p>
		   <p>6. Sort the data you got from your classmate, and only keep the top 200. Use these observations to estimate the Pareto parameter as in step 2.</p>
		   <p>7. Repeat the last two steps, but for a different distribution of \(R_t\). Does the estimated Pareto parameter change in the way that you would expect?</p>
		   <p>Matlab commands which you might find useful:</p>
		   <p>
			   <code>rand<br>
			   csvwrite, csvread <br>
			   sort
			   </code></p>
		   <p><h2>3. Empirical exercises</h2></p>
<p>Estimating top income shares using the Survey of Consumer Finances (“SCF”)</p>

<p>The purpose of this exercise is to give you some feel for the basic tasks involved in analyzing actual data. This includes in particular</p><br>
	<ul>
	<li>downloading the data from the internet,</li>
	<li>getting rid of all the unnecessary data in these datasets,</li>
	<li>converting the data to an appropriate file format</li>
	<li>reading them into the statistical software used,</li>
	<li>and generating some descriptive statistics.</li>
	</ul>
<p>Once these tasks are completed, we can proceed to ask statistical questions that can be answered using methods you learned in this class, such as</p><br>
	<ul>
	<li>Can we conclude from these data that inequality has increased?</li>
	<li>Are there significant differences in poverty rates between different demographic groups?</li>
    <li>Is the distribution of wealth more unequal than the distribution of incomes?</li>
	</ul>
	
<p>We will analyze data from the Survey of Consumer Finances, or SCF. As described on the homepage of the <a href="http://www.federalreserve.gov/econresdata/scf/scfindex.htm">FEDERAL RESERVE</a></p>

<p>“The Survey of Consumer Finances (SCF) is a triennial survey of the balance sheet, pension, income, and other demographic characteristics of U.S. families. The survey also gathers information on the use of financial institutions.”</p>

<p>The data we will be using are available in Stata format at the following addresses:</p><br>
<a href="http://www.federalreserve.gov/econresdata/scf/files/scfp1989excel.zip">http://www.federalreserve.gov/econresdata/scf/files/scfp1989excel.zip</a><br><br>
<a href="http://www.federalreserve.gov/econresdata/scf/files/scfp2007excel.zip">http://www.federalreserve.gov/econresdata/scf/files/scfp2007excel.zip</a>

<p>These data sets contain a lot of variables. Different columns correspond to different variables, different rows correspond to different observations (or entries).</p>

<p>The variables we will be using are the following:</p><br>
<ul>
	<li>WGT (sample weight)</li>
	<li>ASSET (total value of assets held)</li>
	<li>DEBT (total value of debt)</li>
	<li>NETWORTH (difference between assets and debt)</li>
	<li>INCOME (total income)</li>
	<li>WAGEINC (wage and salary income)</li>
	<li>EDUC, (education of the household head)</li>
	<li>AGE (age of the household head)</li>
	<li>RACE (of the respondent)</li>
</ul>
<p>Furthermore, for some technical reasons, these data sets contain five entries for every household. We will only keep the first entry, and delete the remaining four entries.</p>

<p>Recall that all kinds of tutorials for learning Stata can be found at</p><br>

<a href="http://www.ats.ucla.edu/stat/stata/sk/default.htm">http://www.ats.ucla.edu/stat/stata/sk/default.htm</a><br>
and<br>
<a href="http://data.princeton.edu/stata/">http://data.princeton.edu/stata/</a><br>

<p>In this exercise, the problem of calculating standard errors for weighted data comes up. If you are interested in how STATA allows to handle this problem, have a look at</p><br>
<a href="http://www.ats.ucla.edu/stat/stata/seminars/svy_stata_intro/default.htm">http://www.ats.ucla.edu/stat/stata/seminars/svy_stata_intro/default.htm</a>

<p><b>Steps of your assignment:</b></p>
<ol>
	<li>Pick one of the survey years</li><br>
	<li>Download the corresponding data from the internet</li><br>
	<li>Extract the zip file</li><br>
	<li>Open in OpenOffice Calc, or in Excel</li><br>
	<li>Save the file as a “comma delimited variable” (.csv) file, by selecting File-Save As</li><br>
	<li>You can now quit Calc (or Excel), and open Stata</li><br>
	<li>In the Stata command line, type doedit. This will open the do-file editor, in which you can save all steps of your analysis.</li><br>
	<li>On the first line type clear</li><br>
	<li>On the second line, type insheet using filename.csv, where “filename” is the name you gave to your file</li><br>
	<li>Delete all variables, except for those listed above keep wgt asset  debt networth income wageinc educ age race </li><br>
	<li>Save the do file, and then execute it using the arrow in the top right corner of the do-file editor</li><br>
	<li>Open the data browser (by clicking on the symbol of a table with a magnifying glass) and have a look at the imported dataset</li><br>
	<li>Close the data browser</li><br>
	<li>Familiarize yourself with the following STATA commands: gen, sum, svyset, svy. To do so, type for instance “help gen” or “help sum” in the command line. Look in particular at the<br>
1.	weighting options of these commands!<br>
2.	The dataset has five lines for each household. We need to delete all but one of them. The following sequence of commands accomplishes this:
gen no= mod(_n/5, 1)
keep if no==0
drop no
	</li><br>
<li>Continue working on your do file. Calculate the poverty line (0.6 times the median income), the .9 quantile of the income distribution, and the .99 quantile. Don't forget to use weights: sum income [aweight=wgt], detail</li><br>
<li>Generate indicator variables for the following:
	<ul>
	<li>whether a household is below the poverty line: gen poor = (income < povertyline)</li>
	<li>whether a household is among the top 10 percent (top 1 percent) of income earners</li>
	<li>whether the survey respondent is non-Hispanic white (race=1), and </li>
	<li>whether the respondent is black (race=2)</li>
	</ul>
</li><br>
<li>Set the weights for the survey commands using svyset [pweight=wgt]	</li><br>
<li>Calculate the poverty rate for the full population, for the subpopulation of non-Hispanic white households, and for the subpopulation of black households: <br>
	<ul>
    <li>svy: mean poor and svy,</li>
    <li>subpop (nonhispwhite): mean poor, etc. </li>
    <li>These commands also provide the correct standard errors you will have to use for your statistical tests.</li>
	</ul>
</li><br>
<li>Calculate a variable incsharetop10 containing household income divided by mean income, times an indicator for whether the household is among the top 10 percent. The mean of this variable will be the share of incomes going to the top 10 percent. Calculate this mean using svy: mean incsharetop10</li><br>
<li>Do the same for the top 1% income share</li><br>
<li>Replicate the entire analysis for a different survey year. To do so, you just have to change the data set you import in your do file!</li>
</ol>
<br>
<footer>
	   <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a><br><br>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution - <br>NonCommercial - ShareAlike 4.0 International License.</a>
</footer>
</div>
    <!--/.container-->

</div> <!-- #wrapper -->
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')</script>
    <script src="js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="js/ie10-viewport-bug-workaround.js"></script>
    <script src="js/jquery.js"></script>
	<script src="js/bootstrap.js"></script>
    <script src="js/offcanvas.js"></script>
    <script src="js/pushy.js"></script>
    <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML"></script>
    <!-- Menu Toggle Script -->
    <script>
    $(".menu-btn").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>
    
    <script>
	function myFunction(x) {
    x.classList.toggle("change");
	}
	</script>
	
  </body>
</html>
